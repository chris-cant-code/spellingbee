<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Spelling Bee</title>
  <!-- Prevent flash of wrong theme -->
  <script>
    const t = localStorage.getItem('theme');
    if (t) document.documentElement.setAttribute('data-theme', t);
  </script>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Header -->
  <header>
    <h1>Spelling Bee</h1>
    <div class="header-actions">
      <button id="theme-toggle" aria-label="Toggle dark mode">
        <svg id="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="4"/>
          <line x1="12" y1="2" x2="12" y2="5"/>
          <line x1="12" y1="19" x2="12" y2="22"/>
          <line x1="2" y1="12" x2="5" y2="12"/>
          <line x1="19" y1="12" x2="22" y2="12"/>
          <line x1="4.93" y1="4.93" x2="7.05" y2="7.05"/>
          <line x1="16.95" y1="16.95" x2="19.07" y2="19.07"/>
          <line x1="4.93" y1="19.07" x2="7.05" y2="16.95"/>
          <line x1="16.95" y1="7.05" x2="19.07" y2="4.93"/>
        </svg>
        <svg id="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
      </button>
      <button id="date-picker-btn" aria-label="Select puzzle date">
        <span id="selected-date-label">Today</span>
        <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 6l4 4 4-4"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- Score + Rank Bar -->
  <section class="score-section">
    <div class="score-display">
      <span>Score: <strong id="score">0</strong></span>
      <span class="rank-label" id="rank">Beginner</span>
    </div>
    <div class="progress-bar-wrap">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    <div class="score-meta">
      <span class="player-count" id="player-count">1 player</span>
      <span class="next-rank-label" id="next-rank-label"></span>
    </div>
  </section>

  <!-- Loading / Error state -->
  <div id="loading" class="loading-state">Loading puzzle…</div>
  <div id="no-puzzle" class="no-puzzle-state" hidden>
    No puzzle available for this date yet. Check back later!
  </div>

  <!-- Game area (hidden until puzzle loads) -->
  <main id="game-area" hidden>

    <!-- Found Words (top, always visible) -->
    <section class="found-section">
      <div class="found-header-row">
        <h2 id="found-header">Found (0)</h2>
        <div class="sort-tabs" role="group" aria-label="Sort found words">
          <button class="sort-tab active" data-sort="recent" aria-pressed="true">Recent</button>
          <button class="sort-tab" data-sort="alpha" aria-pressed="false">A–Z</button>
          <button class="sort-tab" data-sort="player" aria-pressed="false">Mine</button>
        </div>
      </div>
      <div class="found-words" id="found-words"></div>
    </section>

    <!-- Letter Hints -->
    <section class="hints-section" id="hints-section" hidden>
      <div class="hints-list" id="hints-list"></div>
    </section>

    <!-- Honeycomb Hive -->
    <section class="hive-section">
      <div class="hive" id="hive"></div>
      <button class="shuffle-btn" id="shuffle-btn">Shuffle</button>
    </section>

    <!-- Input Area -->
    <section class="input-section">
      <div class="input-row">
        <div class="input-wrap">
          <div class="ghost-input" id="ghost-input" aria-hidden="true"></div>
          <div
            id="word-display"
            class="word-display"
            aria-label="Current word"
            aria-live="polite"
          >&nbsp;</div>
        </div>
        <button class="icon-btn" id="delete-btn" aria-label="Delete last letter">⌫</button>
        <button class="icon-btn submit-btn" id="submit-btn" aria-label="Submit word">↵</button>
      </div>
      <div class="other-player" id="other-player" hidden>
        <span class="dot"></span> <span id="other-player-text"></span>
      </div>
    </section>

  </main>

  <!-- Date Picker Panel -->
  <div class="overlay" id="overlay" hidden></div>
  <div class="date-panel" id="date-panel" hidden>
    <div class="date-panel-header">
      <h2>Select Puzzle</h2>
      <button id="close-date-panel" aria-label="Close">✕</button>
    </div>
    <ul class="date-list" id="date-list"></ul>
  </div>

  <!-- Toast Notifications -->
  <div class="toast-container" id="toast-container" aria-live="polite"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="app.js"></script>
</body>
</html>
